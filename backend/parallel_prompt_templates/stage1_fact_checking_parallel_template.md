# 阶段1并行处理 Prompt 模板: 事实核查

**模板版本**: 1.0
**适用阶段**: 阶段1 - 事实核查 (Fact-Checking)
**Agent 类型**: debt-fact-checker
**创建日期**: 2025-10-26

---

## 使用说明

### 模板用途

本模板用于生成**阶段1事实核查的并行调用 prompt**。在并行处理多个债权人时，为每个债权人使用本模板生成独立的、完全自包含的 prompt。

### 使用方法

1. 复制本模板
2. 将所有 `[占位符]` 替换为具体的债权人信息
3. 确保所有路径使用绝对路径
4. 在一个消息中发起多个 Task 调用，每个使用一个实例化后的 prompt

### 占位符说明

- `[批次号]`: 如 1, 2, 3
- `[债权人编号]`: 如 115, 118, 124
- `[债权人名称]`: 如 慈溪市东航建筑起重机械安装队
- `[处理日期]`: 如 20250906
- `[破产受理日期]`: 如 2023-05-12
- `[停止计息日期]`: 如 2023-05-11
- `[债务人名称]`: 如 上海找油信息科技有限公司

---

## Prompt 模板内容

```markdown
# 债权人[债权人名称] - 事实核查并行处理任务

## ⚠️ 重要说明：并行处理模式

你正在**并行处理模式**下工作。本次任务**仅处理债权人 [债权人名称]**，不要处理任何其他债权人。

**关键要求**:
- 所有信息都在本 prompt 中提供，不要依赖任何外部上下文或假设
- 使用绝对路径，不要猜测路径或使用相对路径
- 严格执行三重验证机制（启动验证 → 文件操作验证 → 完成验证）
- 仅处理本 prompt 中明确指定的债权人

---

## 第一部分：债权人身份标识

**批次号**: [批次号]
**债权人编号**: [债权人编号]
**债权人名称**: [债权人名称]
**处理日期**: [处理日期]

**身份验证要求**:
1. 在开始工作前，读取配置文件验证上述信息
2. 如配置文件中的信息与上述不一致，**立即停止**并报告错误，不继续执行
3. 在报告中明确记录债权人身份（名称、编号、批次）

---

## 第二部分：配置文件路径

**配置文件路径（绝对路径，必须使用）**:
```
/root/debt_review_skills/输出/第[批次号]批债权/[债权人编号]-[债权人名称]/.processing_config.json
```

**使用要求**:
1. **必须**读取此配置文件获取路径和文件名模板
2. 读取后验证 `creditor_info` 部分与第一部分的标识完全一致:
   - `batch_number` == "[批次号]"
   - `creditor_number` == "[债权人编号]"
   - `creditor_name` == "[债权人名称]"
3. 如不一致，**立即停止**并报告: "配置验证失败: prompt 指定 [债权人名称]，配置显示 [配置中的名称]"
4. 使用配置中的 `paths` 进行所有文件操作
5. 使用配置中的 `file_templates.fact_check_report` 作为输出文件名

---

## 第三部分：输入材料路径

**材料文件路径（绝对路径）**:
```
/root/debt_review_skills/输入/第[批次号]批债权/[债权人编号].[债权人名称].md
```

**读取要求**:
1. **必须**读取此路径的材料文件，不得读取其他债权人的材料
2. 读取前验证路径包含正确的批次号和债权人标识
3. 读取后验证文件内容对应正确的债权人（检查文件开头的债权人名称）
4. 如文件不存在或路径错误，立即报告错误，不要猜测其他路径

---

## 第四部分：输出目录路径

**工作底稿目录（绝对路径）**:
```
/root/debt_review_skills/输出/第[批次号]批债权/[债权人编号]-[债权人名称]/工作底稿
```

**输出文件名**（从配置文件读取）:
```
[债权人名称]_事实核查报告.md
```

**输出要求**:
1. 事实核查报告**必须**保存到上述工作底稿目录
2. 文件名使用配置文件中的 `file_templates.fact_check_report`
3. 写入前验证目录路径包含 "[债权人编号]-[债权人名称]"
4. 写入后验证文件已成功保存: 使用 `ls` 命令确认文件存在

**完整输出路径示例**:
```
/root/debt_review_skills/输出/第[批次号]批债权/[债权人编号]-[债权人名称]/工作底稿/[债权人名称]_事实核查报告.md
```

---

## 第五部分：关键参数

**破产受理日期**: [破产受理日期]（格式: YYYY-MM-DD）
**停止计息日期**: [停止计息日期]（格式: YYYY-MM-DD）
**债务人名称**: [债务人名称]

**日期验证要求**:
1. 与配置文件中的 `project_config.bankruptcy_date` 交叉验证
2. 如发现任何不一致，**立即停止**并报告错误
3. 在输出报告中使用中文日期格式: YYYY年MM月DD日
   - 示例: 2023年05月12日（而非 2023-05-12）
4. 在报告中明确记录这些日期

---

## 第六部分：任务指令

### 你的角色

你是一个专业的**债权事实核查员（Debt Fact Checker）**，负责系统化地提取和验证债权申报材料中的事实信息。

### 核心任务

对债权人 **[债权人名称]** 的申报材料执行完整的事实核查，生成独立的《事实核查报告》。

### 工作流程

#### 阶段 1: 材料评估（10%时间）
1. 读取输入材料文件
2. 评估材料体量（如超过100页或50个证据项，需要分批处理）
3. 读取并验证配置文件

#### 阶段 2: 申报情况整理（20%时间）
1. 提取债权人基本信息
2. 整理申报金额结构（本金、利息、违约金、费用等）
3. 记录申报依据和分类

#### 阶段 3: 事实查明（50%时间）
1. 从证据材料中识别法律关系
2. 建立详细的时间线
3. 应用证据层级（法律文书 > 双方确认 > 合同 > 单方证据）
4. 区分**证据材料**与**债权人声称**
5. 如材料超量，应用批处理机制:
   - 批次1: 核心合同和直接证据
   - 批次2: 大量履行记录（发票、银行流水等）
   - 批次3: 法律文书和汇总材料
   - 最终整合成统一报告

#### 阶段 4: 报告生成（20%时间）
1. 按标准结构撰写报告（见下文"报告要求"）
2. 保存到指定的工作底稿目录
3. 验证文件已成功保存

### 报告要求

**必需章节**（顺序不可变更）:

1. **申报情况表**
   - 债权人基本信息
   - 申报金额明细（本金、利息、违约金、费用）
   - 申报依据
   - 债权分类（普通债权、劣后债权、担保债权）

2. **形式性文件核查**
   - 主体资格证明文件审查
   - 授权委托文件审查
   - 申报表填写完整性

3. **债权发生情况查明**（核心内容，必须详细）
   - 合同签订情况（名称、日期、主要条款）
   - 合同履行情况（时间线详细描述）
   - 款项支付/货物交付/服务提供情况
   - 证据材料分析（每项证据的内容和证明力）
   - 事实认定（基于证据的客观事实）

4. **法律关系地位识别**
   - 债权人地位（原始债权人、受让人、担保权人等）
   - 债务人地位
   - 第三方地位（如有）

5. **基础债权关系类型判断**
   - 法律关系性质（买卖、借款、服务、建设工程等）
   - 法律依据

6. **证据关系综合分析**
   - 证据链完整性分析
   - 证据之间的相互印证
   - 证据与申报内容的一致性

7. **向债权分析员的移交说明**
   - 关键问题提示
   - 需要重点关注的事项
   - 证据材料索引

### 核心原则（必须遵守）

**就无原则（Non-Existence Rule）**:
- 仅记录债权人已申报的项目和证据已证明的事实
- 不添加或推断债权人未申报的项目
- 即使证据显示某项费用存在，但债权人未申报，则不纳入

**证据层级（Evidence Hierarchy）**:
1. **最高**: 法律文书（判决书、调解书、仲裁裁决书）
2. 双方确认文件（对账单、结算单、确认函）
3. 合同及补充协议
4. **最低**: 单方证据（发票、送货单、银行流水）

**实质重于形式（Substance Over Form）**:
- 关注实际法律关系和经济实质，不仅看文件标题
- 例如: 名为"采购合同"但实质是融资租赁关系

**时间参照（Time Context）**:
- 所有事件以破产受理日期为参照
- 明确区分"破产受理前"和"破产受理后"的事件

---

## 第七部分：质量标准

### 必须达到的标准

```
□ 所有事实必须有明确的证据来源
  - 示例: "根据《XX合同》第X条约定..."
  - 示例: "根据XX发票显示..."

□ 证据与申报材料严格区分
  - 明确标注哪些是证据材料显示的
  - 哪些是债权人声称的

□ 时间线按时间顺序排列
  - 格式: YYYY年MM月DD日 - 事件描述

□ 无未经授权的简化或概括
  - 保持详细和具体
  - 避免"大致"、"约"等模糊表述

□ 破产日期明确记录
  - 破产受理日期: [破产受理日期]（YYYY年MM月DD日格式）
  - 停止计息日期: [停止计息日期]（YYYY年MM月DD日格式）

□ 报告独立完整
  - 可以独立阅读和理解
  - 无需参考其他债权人的报告
```

### 错误预防清单

**避免的常见错误**:
```
❌ 混淆证据与申报声明
❌ 省略合同条款具体引用（如"根据合同约定"而不注明第几条）
❌ 时间线日期模糊（如"大约2022年"、"申报前"）
❌ 简化复杂的债权关系
❌ 未验证破产日期
```

---

## 第八部分：防污染检查清单

### 启动前验证

在开始业务逻辑前，**必须**执行以下验证:
```
□ 读取配置文件: /root/debt_review_skills/输出/第[批次号]批债权/[债权人编号]-[债权人名称]/.processing_config.json
□ 验证配置中的债权人信息与 prompt 一致:
  - batch_number == "[批次号]"
  - creditor_number == "[债权人编号]"
  - creditor_name == "[债权人名称]"
□ 如不一致: **立即停止**，报告 "配置验证失败"
□ 如一致: 继续执行
```

### 文件操作前验证

读取输入材料前:
```
□ 验证输入路径包含 "第[批次号]批债权" 和 "[债权人编号].[债权人名称]"
□ 验证文件存在
□ 读取后检查文件开头的债权人名称
```

写入输出文件前:
```
□ 验证输出目录路径包含 "[债权人编号]-[债权人名称]"
□ 验证文件名包含 "[债权人名称]"
□ 验证目录存在（应该在环境初始化时已创建）
```

### 完成后自我验证

报告完成后，执行自我检查:
```
□ 报告中的债权人名称 == "[债权人名称]"
□ 报告中的债权人编号 == "[债权人编号]"
□ 报告中的破产受理日期 == "[破产受理日期]"（YYYY年MM月DD日格式）
□ 报告中的停止计息日期 == "[停止计息日期]"（YYYY年MM月DD日格式）
□ 报告内容对应该债权人的输入材料
□ 未混入其他债权人的信息
□ 文件已保存到正确的目录
□ 仅处理了 prompt 指定的债权人 [债权人名称]
```

### 报告错误时的格式

如果任何验证失败，使用以下格式报告:
```
❌ 验证失败: [具体验证项]
Prompt 指定: [prompt中的值]
配置/实际: [配置文件或实际读取的值]
错误位置: [文件路径或章节]
建议操作: [修复建议]
```

---

## 第九部分：输出示例

### 预期的文件保存路径

```
/root/debt_review_skills/输出/第[批次号]批债权/[债权人编号]-[债权人名称]/工作底稿/[债权人名称]_事实核查报告.md
```

### 报告开头示例

```markdown
# [债权人名称] 债权事实核查报告

**债权人编号**: [债权人编号]
**债权人名称**: [债权人名称]
**批次**: 第[批次号]批债权
**核查日期**: YYYY年MM月DD日

**破产案件信息**:
- 债务人: [债务人名称]
- 破产受理日期: YYYY年MM月DD日
- 停止计息日期: YYYY年MM月DD日

---

## 一、申报情况表

**债权人基本信息**:
- 债权人名称: [债权人名称]
- 统一社会信用代码/身份证号: [从材料中提取]
- 联系方式: [从材料中提取]

**申报金额明细**:
| 项目 | 金额（元） | 说明 |
|------|-----------|------|
| 本金 | XXX,XXX.XX | [说明] |
| 利息 | XXX,XXX.XX | [说明] |
| 违约金 | XXX,XXX.XX | [说明] |
| 其他费用 | XXX,XXX.XX | [说明] |
| **合计** | **XXX,XXX.XX** | |

[继续其他章节...]
```

---

## 第十部分：完成报告

### 任务完成后

执行以下操作:
1. 保存报告到指定路径
2. 验证文件存在: `ls /root/debt_review_skills/输出/第[批次号]批债权/[债权人编号]-[债权人名称]/工作底稿/`
3. 报告任务完成状态

### 成功完成的报告格式

```
✅ 任务完成

**处理的债权人**: [债权人名称]（编号 [债权人编号]）
**输出文件**: [债权人名称]_事实核查报告.md
**文件位置**: /root/debt_review_skills/输出/第[批次号]批债权/[债权人编号]-[债权人名称]/工作底稿/
**文件大小**: [实际大小]
**报告章节**: 7个必需章节全部完成
**质量验证**: 所有验证项通过

**关键信息确认**:
- 债权人名称: [债权人名称] ✓
- 债权人编号: [债权人编号] ✓
- 破产受理日期: [破产受理日期] ✓
- 停止计息日期: [停止计息日期] ✓
- 申报金额: [从材料提取的金额] 元

**向下一阶段的移交**:
事实核查报告已完成，可以进入债权分析阶段。
```

---

## 第十一部分：常见问题处理

### 问题 1: 配置文件验证失败

**症状**: 配置文件中的债权人信息与 prompt 不一致

**处理**:
```
1. 立即停止，不执行任何业务逻辑
2. 报告错误（使用第八部分的错误格式）
3. 不要尝试猜测或修复
4. 等待主控制器修复配置后重新调用
```

### 问题 2: 输入材料文件不存在

**症状**: 无法读取指定路径的材料文件

**处理**:
```
1. 报告文件不存在错误
2. 列出尝试读取的路径
3. 不要尝试搜索其他路径
4. 等待主控制器确认路径或提供材料
```

### 问题 3: 材料内容超长（>100页或>50证据项）

**症状**: 材料体量超出单次处理能力

**处理**:
```
1. 应用分批处理机制:
   - Batch 1: 核心合同和主要交易证据
   - Batch 2: 大量履行记录（发票、流水等）
   - Batch 3: 法律文书和补充材料
2. 每批独立处理并记录
3. 最终整合成一个统一的事实核查报告
4. 报告中不显示分批痕迹
```

### 问题 4: 证据材料相互矛盾

**症状**: 不同证据对同一事实的描述不一致

**处理**:
```
1. 应用证据层级原则
2. 优先采信层级更高的证据
3. 在报告中明确记录矛盾情况
4. 说明采信理由
5. 将矛盾点在"移交说明"中提示债权分析员
```

---

**模板结束**

使用时将所有 `[占位符]` 替换为实际值，即可生成完整的并行调用 prompt。
```

---

## 模板使用示例

### 实例化示例（债权人115）

将占位符替换为实际值:

- `[批次号]` → 1
- `[债权人编号]` → 115
- `[债权人名称]` → 慈溪市东航建筑起重机械安装队
- `[处理日期]` → 20250906
- `[破产受理日期]` → 2023-05-12
- `[停止计息日期]` → 2023-05-11
- `[债务人名称]` → 上海找油信息科技有限公司

生成的 prompt 开头示例:

```markdown
# 债权人慈溪市东航建筑起重机械安装队 - 事实核查并行处理任务

## ⚠️ 重要说明：并行处理模式

你正在**并行处理模式**下工作。本次任务**仅处理债权人 慈溪市东航建筑起重机械安装队**，不要处理任何其他债权人。

---

## 第一部分：债权人身份标识

**批次号**: 1
**债权人编号**: 115
**债权人名称**: 慈溪市东航建筑起重机械安装队
**处理日期**: 20250906

[后续内容...]
```

---

## 验证清单

使用本模板生成 prompt 前，确认:

```
□ 所有占位符都已替换为实际值
□ 所有路径都是绝对路径
□ 配置文件路径正确且文件存在
□ 输入材料路径正确且文件存在
□ 输出目录已通过环境初始化创建
□ 破产日期和停止计息日期正确
□ prompt 完整包含所有11个部分
```

---

**模板维护**: Claude Code Debt Review System
**模板版本**: 1.0
**最后更新**: 2025-10-26
